# **CONSTRAINTS:**

- Constraints are used to specify rules for data in a table.

- Constraints can be specified when the table is created with the CREATE statement, or after the table is created with the ALTER statement.

- SQL has following constraints:

  1. NULL
  2. NOT NULL
  3. PRIMARY KEY
  4. FOREIGN KEY
  5. UNIQUE
  6. CHECK
  7. DEFAULT

---

<br>

<br>

> ## **NULL:**

- The NULL constraint enforces a column to accept NULL values.

    ```sql
    CREATE TABLE persons 
    ( 
        id        INT, 
        lastname  VARCHAR(255) NULL, 
        firstname VARCHAR(255) NULL, 
        age       INT 
    ); 
    ```

- By default, a column can hold NULL values.

<br>

> ## **NOT NULL:**

- The NOT NULL constraint enforces a column to NOT accept NULL values.

    ```sql
    CREATE TABLE persons 
    ( 
        id        INT NOT NULL, 
        lastname  VARCHAR(255), 
        firstname VARCHAR(255), 
        age       INT 
    ); 
    ```

- Using alter command

    ```sql
    ALTER TABLE person 
    ALTER COLUMN age INT NOT NULL;
    ```

<br>

> ## **PRIMARY KEY:**

- The PRIMARY KEY constraint uniquely identifies each record in a table.

- Primary keys must contain UNIQUE values, and cannot contain NULL values.

- A table can have only ONE primary key; and in the table, this primary key can consist of single or multiple columns (fields).

- ***Composite Key:***  a composite key is a primary key that consists of two or more columns in a table

    1. NOT NULL.
    2. No duplicate.
    3. 1 PK (single or multiple columns) per  table.
    4. Cannot apply PK on nullable columns

    ```sql
    CREATE TABLE persons 
    ( 
        id        INT PRIMARY KEY, 
        lastname  VARCHAR(255), 
        firstname VARCHAR(255), 
        age       INT 
    ); 
    ```

- Using alter command

    ```sql
    ALTER TABLE persons 
    ADD PRIMARY KEY (id);
    ```
  
- There are two approaches to creating a primary key: using a ***Natural key*** or using a ***Surrogate key***.

### **Natural Key Vs Surrogate Key:**

**Natural Key:** The key created using the original data set and has meaning to the user.

**Surrogate Key:** An artificial key that is generated by the system and is not part of the dataset and has no meaning to the user..

<br>

> ### **FOREIGN KEY:**

- A FOREIGN KEY is a key used to link two tables together.

- A FOREIGN KEY is a field (or collection of fields) in one table that refers to the PRIMARY KEY in another table.
  
  1. Existence of one table with PK
  2. Allows insert only those values which are present in PK
  3. Allows duplicate
  4. Allows NULLs

    ```sql
    CREATE TABLE product 
    ( 
        pid   INT NOT NULL PRIMARY KEY, 
        pname VARCHAR(10) NOT NULL, 
        eid   INT FOREIGN KEY REFERENCES emp(eid) 
    );
    ```

    **![](https://lh4.googleusercontent.com/IcNMioDm-exysAsXE3pHH6rqIxhvLx6sf0krYvm_-DZQydlr2B0-Xa7YjxBRNynLv-knU99RIxltSu7Hb8bNDaCt7NfgZeO4duKRwX04oc4tKKrPftXTccSkUrL7StiL8MvYfQ-3eVMYYHfctRD_eg)**

- Using alter command

    ```sql
    ALTER TABLE product
    ADD FOREIGN KEY(eid) reference emp(eid) ;
    ```

<br>

> ## **UNIQUE:**

- The UNIQUE constraint ensures that all values in a column are different.
- Eg: an email column can have unique constraints as it will have unique values but can have null value.

  1. Allows only one NULL value. (bcz 2 nulls will cause duplicacy)
  2. No duplicate.
  3. Multiple Unique per  table.
  4. Can apply Unique on  nullable columns

    ```sql
    CREATE TABLE persons 
    ( 
        id        INT UNIQUE, 
        lastname  VARCHAR(255) UNIQUE, 
        firstname VARCHAR(255),  
        age       INT 
    ); 
    ```

- Using alter command

    ```sql
    ALTER TABLE persons 
    ADD UNIQUE (id); 
    ```

<br>

> ## **CHECK:**

- If you define a CHECK constraint on a single column it allows only certain values for that column.
  
    ```sql
        CREATE TABLE persons 
    ( 
        id        INT, 
        lastname  VARCHAR(255), 
        firstname VARCHAR(255), 
        age       INT CHECK (age>=18) --This will only allow to insert when age >= 18
    );                      
    ```

- Using alter command

    ```sql
    ALTER TABLE persons 
    ADD CHECK (age>=18); 
    ```

<br>

> ## **DEFAULT:**

- The DEFAULT constraint is used to provide a default value for a column.

    ```sql
    CREATE TABLE orders 
    ( 
        id          INT, 
        ordernumber INT , 
        orderdate   DATE DEFAULT Getdate() 
    ); 
    ```

    ```sql
    CREATE TABLE persons 
    ( 
        id        INT, 
        firstname VARCHAR(255), 
        age       INT, 
        city      VARCHAR(255) DEFAULT 'Sandnes' 
    ); 
    ```

- Using alter command

    ```sql
    ALTER TABLE persons 
    ADD DEFAULT 'Sandnes' FOR city; 
    ```
